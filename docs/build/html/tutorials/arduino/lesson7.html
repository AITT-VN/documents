<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8. Bài học 7: Vỗ tay thay đổi màu đèn LED &mdash; OhStem Education Wiki 2.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=60dbed4a"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="9. Bài học 8: Phát nhạc với còi báo" href="lesson8.html" />
    <link rel="prev" title="7. Bài học 6: Đèn LED RGB cảm ứng" href="lesson6.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo-ohstem-white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Cửa hàng</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../store/store.html"><strong>Đi tới cửa hàng</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Máy tính lập trình Yolo:Bit</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../yolobit_v2/lam-quen.html"><strong>Làm quen với Yolo:Bit</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yolobit_v2/homebit.html"><strong>Home:Bit - Bộ Kit nhà thông minh</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yolobit_v2/plantbit.html"><strong>Plant:Bit - Bộ Kit trồng cây thông minh</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yolobit_v2/citybit.html"><strong>City:Bit - Bộ Kit thành phố thông minh</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yolobit_v2/physbit.html"><strong>Phys:Bit - Kit học điện tử</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AIoT Kit - Lập trình AI &amp; IoT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aiot/lam_quen.html"><strong>Làm quen với AIoT KIT</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Yolo UNO - Mạch lập trình Arduino</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../yolo_uno/yolo_uno.html"><strong>Làm quen với Yolo UNO</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot STEM Rover</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/rover.html"><strong>Rover - Kit robot lập trình</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/servo_pack.html"><strong>Phụ kiện Rover - Servo Pack</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/tay_gap.html"><strong>Tay gắp Robot Gripper</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/dau_nang.html"><strong>Đầu nâng Robot Rover</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/gamepad.html"><strong>Tay cầm điều khiển robot</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/gap_hai_bac.html"><strong>Tay gắp 2 bậc</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/rover_tank.html"><strong>Kit xe tăng</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/camera_ai.html"><strong>Camera AI</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot_rover/camera_ai_v2.html"><strong>Camera AI V2</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Arm</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../robot_arm/robot_arm.html"><strong>Robot Arm - Kit lập trình cánh tay robot</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot lập trình xBot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/xbot.html"><strong>Robot lập trình xBot</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/inventor.html"><strong>xBot Inventor Kit</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/gripper.html"><strong>Đầu gắp Gripper</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/dumptruck.html"><strong>Bộ Dump Truck</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/dau-nang.html"><strong>Đầu nâng ForkLift</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/nem-bong.html"><strong>Bộ bắn bóng</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xbot/gap-hai-bac.html"><strong>Tay gắp 2 bậc</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xBuild Creator Kit</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../micropython/index.html"><strong>Hướng dẫn lập trình MicroPython</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><strong>Hướng dẫn lập trình Arduino</strong></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html">1. Hướng Dẫn Cài Đặt Arduino và xController</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson1.html">2. Bài học 1: Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson2.html">3. Bài học 2: Blink LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson3.html">4. Bài học 3: Nhấn nút bật đèn LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson4.html">5. Bài học 4: Điều khiển tốc độ chớp tắt đèn LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson5.html">6. Bài học 5: Điều chỉnh độ sáng LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson6.html">7. Bài học 6: Đèn LED RGB cảm ứng</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8. Bài học 7: Vỗ tay thay đổi màu đèn LED</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#muc-tieu">Mục tiêu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kien-thuc-moi">Kiến thức mới</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thiet-bi-can-su-dung">Thiết bị cần sử dụng</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ket-noi-phan-cung">Kết nối phần cứng</a></li>
<li class="toctree-l3"><a class="reference internal" href="#viet-chuong-trinh">Viết chương trình</a></li>
<li class="toctree-l3"><a class="reference internal" href="#giai-thich-chuong-trinh">Giải thích chương trình</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lesson8.html">9. Bài học 8: Phát nhạc với còi báo</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson9.html">10. Bài học 9: Cảm biến gia tốc góc nghiêng</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson10.html">11. Bài học 10: Hiển thị thông tin lên màn hình LCD</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson11.html">12. Bài học 11: Theo dõi nhiệt độ, độ ẩm trên LCD</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson12.html">13. Bài học 12: Remote hồng ngoại</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson13.html">14. Bài học 13: Giao tiếp Bluetooth Low Energy</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html">15. Giới thiệu về dự án Nhà thông minh</a></li>
<li class="toctree-l2"><a class="reference internal" href="project1.html">16. Project 1: Đèn điều khiển từ xa</a></li>
<li class="toctree-l2"><a class="reference internal" href="project2.html">17. Project 2: Quạt thông minh</a></li>
<li class="toctree-l2"><a class="reference internal" href="project3.html">18. Project 3: Đèn thông minh</a></li>
<li class="toctree-l2"><a class="reference internal" href="project4.html">19. Project 4: Hệ thống chống trộm và báo động</a></li>
<li class="toctree-l2"><a class="reference internal" href="project5.html">20. Project 5: Cửa thông minh</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Game Kit - Kit học lập trình game</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gamekit/gamekit.html">Hướng dẫn lập trình GameKit</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Các module mở rộng</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../module/cai-dat-thu-vien.html"><strong>Hướng dẫn cài đặt thư viện</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/cai-dat-arduino.html"><strong>Hướng dẫn cài đặt Arduino và Yolo:Bit</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/cam-bien.html"><strong>Cảm biến</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/hien-thi.html"><strong>Hiển thị</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/dieu-khien-dong-ngat.html"><strong>Điều khiển đóng ngắt</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/board-mo-rong.html"><strong>Board mở rộng</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../module/dong-co.html"><strong>Động cơ</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API thư viện</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api-xbot.html">Robot xBot và xController</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sa bàn thi đấu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sa_ban/sa_ban_index.html"><strong>Hướng dẫn sử dụng các sa bàn thi đấu</strong></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OhStem Education Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><strong>Hướng dẫn lập trình Arduino</strong></a></li>
      <li class="breadcrumb-item active">8. Bài học 7: Vỗ tay thay đổi màu đèn LED</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/username/reponame/blob/mastertutorials/arduino/lesson7.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bai-hoc-7-vo-tay-thay-doi-mau-den-led">
<h1>8. Bài học 7: Vỗ tay thay đổi màu đèn LED<a class="headerlink" href="#bai-hoc-7-vo-tay-thay-doi-mau-den-led" title="Link to this heading"></a></h1>
<section id="muc-tieu">
<h2>Mục tiêu<a class="headerlink" href="#muc-tieu" title="Link to this heading"></a></h2>
<p>Tìm hiểu về cảm biến âm thanh và ứng dụng vào bật tắt đèn LED RGB tích hợp trên xController.</p>
</section>
<section id="kien-thuc-moi">
<h2>Kiến thức mới<a class="headerlink" href="#kien-thuc-moi" title="Link to this heading"></a></h2>
<p><em>Cảm biến âm thanh</em></p>
<p>Cảm biến âm thanh có thể dùng để phát hiện và đo cường độ âm thanh của môi trường xung quanh. Chúng ta có thể ứng dụng cảm biến này để điều khiển đèn LED RGB bằng tiếng vỗ tay.</p>
<p><em>Vẽ biểu đồ dữ liệu bằng cửa sổ Serial Plotter</em></p>
<p>Cửa sổ Serial Plotter có chức năng tương tự như cửa sổ Serial Monitor, cho phép bạn có thể quan sát các giá trị đo được trong chương trình, tuy nhiên Serial Plotter hỗ trợ biểu diễn dưới dạng biểu đồ theo thời gian thực. Điều này rất hữu ích đối với những dữ liệu cần được quan sát trực quan.</p>
<a class="reference internal image-reference" href="../../_images/ls-7-1.png"><img alt="../../_images/ls-7-1.png" class="align-center" src="../../_images/ls-7-1.png" style="width: 600px;" /></a>
<p>Bạn có thể mở cửa sổ Serial Plotter bằng cách vào menu <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">&gt;</span> <span class="pre">Serial</span> <span class="pre">Plotter</span></code>.</p>
<a class="reference internal image-reference" href="../../_images/ls-7-2.png"><img alt="../../_images/ls-7-2.png" class="align-center" src="../../_images/ls-7-2.png" style="width: 600px;" /></a>
</section>
<section id="thiet-bi-can-su-dung">
<h2>Thiết bị cần sử dụng<a class="headerlink" href="#thiet-bi-can-su-dung" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="../../_images/device-7.png"><img alt="../../_images/device-7.png" class="align-center" src="../../_images/device-7.png" style="width: 600px;" /></a>
</section>
<section id="ket-noi-phan-cung">
<h2>Kết nối phần cứng<a class="headerlink" href="#ket-noi-phan-cung" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="../../_images/ls-7-3.png"><img alt="../../_images/ls-7-3.png" class="align-center" src="../../_images/ls-7-3.png" style="width: 600px;" /></a>
</section>
<section id="viet-chuong-trinh">
<h2>Viết chương trình<a class="headerlink" href="#viet-chuong-trinh" title="Link to this heading"></a></h2>
<p>Mở phần mềm Arduino IDE.</p>
<p>Nếu bạn chưa cài đặt thư viện cho xController thì tham khảo bài học số 4 để tải và cài đặt thư viện vào Arduino IDE.</p>
<p>Copy đoạn code sau, click vào nút <code class="docutils literal notranslate"><span class="pre">Verify</span></code> để kiểm tra lỗi chương trình. Sau khi biên dịch không báo lỗi, bạn có thể nạp đoạn code vào board.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xcontroller.h&gt;</span>

<span class="n">XController</span><span class="w"> </span><span class="n">xcon</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="n">soundSensorPin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A4_1</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">sensorValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">LEDState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">(){</span>
<span class="w">  </span><span class="c1">// đọc giá trị cảm biến</span>
<span class="w">  </span><span class="n">sensorValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analogRead</span><span class="p">(</span><span class="n">soundSensorPin</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// in ra giá trị cửa sổ Serial đọc được</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">sensorValue</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// nếu giá trị cảm biến lớn hơn 1000</span>
<span class="w">  </span><span class="c1">// thì đảo trạng thái bật tắt của đèn LED</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sensorValue</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">){</span>
<span class="w">    </span><span class="n">LEDState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LEDState</span><span class="p">;</span>
<span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// bật tắt đèn LED RGB dựa vào trạng thái đã được xử lý</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">LEDState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">    </span><span class="n">xcon</span><span class="p">.</span><span class="n">showLED</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">xcon</span><span class="p">.</span><span class="n">showLED</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sau khi chạy chương trình, bạn có thể xem giá trị của cảm biến âm thanh từ cửa sổ <code class="docutils literal notranslate"><span class="pre">Serial</span> <span class="pre">Monitor</span></code>, bằng cách vào mục <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">Serial</span> <span class="pre">Plotter</span></code>. Bạn thử vỗ tay phát ra tiếng động hoặc chạm nhẹ vào microphone của cảm biến để thấy sự thay đổi của giá trị cường độ âm thanh bằng biểu đồ.</p>
<a class="reference internal image-reference" href="../../_images/ls-7-4.png"><img alt="../../_images/ls-7-4.png" class="align-center" src="../../_images/ls-7-4.png" style="width: 600px;" /></a>
</section>
<section id="giai-thich-chuong-trinh">
<h2>Giải thích chương trình<a class="headerlink" href="#giai-thich-chuong-trinh" title="Link to this heading"></a></h2>
<p>Các câu lệnh include thư viện, khai báo đối tượng XController và các biến sẽ tương tự như các bài trước. Tuy nhiên, chúng ta cần để ý đoạn code đảo trạng thái của đèn LED RGB như sau:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="c1">// nếu giá trị cảm biến lớn hơn 1000</span>
<span class="c1">// thì đảo trạng thái bật tắt của đèn LED</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sensorValue</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">){</span>
<span class="w">  </span><span class="n">LEDState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">LEDState</span><span class="p">;</span>
<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Câu lệnh <code class="docutils literal notranslate"><span class="pre">if</span></code> sẽ kiểm tra kết quả đo được có lớn hơn 1000 hay không, nếu có thì mới đảo trạng thái đèn LED. Giá trị 1000 ở đây gọi là ngưỡng, do chúng ta tự đo và ấn định. Trong trường hợp này, nếu chúng ta để ngưỡng càng nhỏ thì chương trình sẽ chạy càng nhạy.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>LEDState = 1 - LEDState;
</pre></div>
</div>
<p>Đảo trạng thái LED (<code class="docutils literal notranslate"><span class="pre">LEDState</span></code>) đơn giản từ 0 thành 1 hoặc từ 1 thành 0: Nếu LEDState đang có giá trị là 0 thì LEDState mới = 1 - 0, sẽ thành 1. Ngược lại, nếu LEDState đang là 1 thì <code class="docutils literal notranslate"><span class="pre">LEDState</span></code> mới (= 1 - 1) sẽ thành 0.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>delay(300);
</pre></div>
</div>
<p>Sau khi xử lý xong, chúng ta cần phải tạm dừng chương trình trong một thời gian ngắn để tránh trường hợp do chương trình chạy quá nhanh, lúc đó tiếng động truyền vào kéo dài chưa kịp dứt thì sẽ bị xử lý nhiều lần, tạo ra kết quả bật tắt không mong muốn.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="c1">// bật tắt đèn LED RGB dựa vào trạng thái đã được xử lý</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">LEDState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">  </span><span class="n">xcon</span><span class="p">.</span><span class="n">showLED</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">xcon</span><span class="p">.</span><span class="n">showLED</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Cuối vòng lặp, chúng ta sẽ dùng cấu trúc <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">...</span> <span class="pre">else</span> <span class="pre">...</span></code> để bật tắt đèn LED, tùy vào giá trị của biến LEDState. Hàm để bật tắt LED RGB (thực chất là thay đổi màu vì ta chỉ sử dụng màu đỏ) là hàm <code class="docutils literal notranslate"><span class="pre">showLED()</span></code> đã được giải thích ở bài học trước.</p>
<p><em>Khi chương trình chạy, đèn LED sẽ thay đổi màu nếu phát hiện âm thanh của môi trường xung quanh đủ lớn.</em></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lesson6.html" class="btn btn-neutral float-left" title="7. Bài học 6: Đèn LED RGB cảm ứng" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lesson8.html" class="btn btn-neutral float-right" title="9. Bài học 8: Phát nhạc với còi báo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OHSTEM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>