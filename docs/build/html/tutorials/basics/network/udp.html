

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>10.4. Socket - UDP &mdash; OhStem Product Documents 0.0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="10.5. HTTP" href="http.html" />
    <link rel="prev" title="10.3. Socket - TCP" href="tcp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/logo-ohstem.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../board/index.html">xController Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Micropython Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Basic Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../repl.html">1. REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oled.html">2. Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="../neopixel.html">3. RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buzz.html">4. Music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buttons.html">5. Key Button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../touchpad.html">6. Touchpad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound.html">7. Microphone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../light.html">8. Light Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accelerometer.html">9. Accelerometer</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">10. Network</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="network_basics.html">10.1. Network Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="tcpip.html">10.2. Introduction to TCP/IP</a></li>
<li class="toctree-l3"><a class="reference internal" href="tcp.html">10.3. Socket - TCP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">10.4. Socket - UDP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction-to-udp-protocol">10.4.1. Introduction to UDP protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#udp-programming">10.4.2. UDP Programming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="http.html">10.5. HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="parsing_json.html">10.6. Parsing JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uart.html">11. Serial Port</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/index.html">12. Pins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advance/index.html">Advance Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Arduino Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Basic Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../repl.html">1. REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oled.html">2. Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="../neopixel.html">3. RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buzz.html">4. Music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buttons.html">5. Key Button</a></li>
<li class="toctree-l2"><a class="reference internal" href="../touchpad.html">6. Touchpad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound.html">7. Microphone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../light.html">8. Light Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accelerometer.html">9. Accelerometer</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">10. Network</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="network_basics.html">10.1. Network Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="tcpip.html">10.2. Introduction to TCP/IP</a></li>
<li class="toctree-l3"><a class="reference internal" href="tcp.html">10.3. Socket - TCP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">10.4. Socket - UDP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction-to-udp-protocol">10.4.1. Introduction to UDP protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#udp-programming">10.4.2. UDP Programming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="http.html">10.5. HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="parsing_json.html">10.6. Parsing JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uart.html">11. Serial Port</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/index.html">12. Pins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advance/index.html">Advance Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../library/micropython-api/index.html">MicroPython Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../library/arduino-api/index.html">Arduino Library</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OhStem Product Documents</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Basic Tutorials</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">10. </span>Network</a> &raquo;</li>
        
      <li><span class="section-number">10.4. </span>Socket - UDP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/username/reponame/blob/mastertutorials/basics/network/udp.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="socket-udp">
<h1><span class="section-number">10.4. </span>Socket - UDP<a class="headerlink" href="#socket-udp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction-to-udp-protocol">
<h2><span class="section-number">10.4.1. </span>Introduction to UDP protocol<a class="headerlink" href="#introduction-to-udp-protocol" title="Permalink to this headline">¶</a></h2>
<p>UDP (User Datagram Protocol) is a connectionless, unreliable, transport protocol communication protocol based on datagram.</p>
<p>The communication process of UDP is more simple than that of TCP. The three-way handshake and four-way handshake that do not need to be copied reflect the connectionless.
Therefore, UDP transmission speed is faster than TCP, but it is easy to lose packets, the data arrival order is not guaranteed, the lack of congestion control, adhering to the principle of best effort delivery, reflects the unreliability.</p>
<p>The following figure explains the interactive process of the UDP communication connection between the server and the client：</p>
<div class="figure align-default" id="id1">
<img alt="../images/tutorials/udp原理.png:scale:100%:align:center" src="../images/tutorials/udp原理.png:scale:100%:align:center" />
<p class="caption"><span class="caption-text">Socket UDP communication process</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="udp-programming">
<h2><span class="section-number">10.4.2. </span>UDP Programming<a class="headerlink" href="#udp-programming" title="Permalink to this headline">¶</a></h2>
<p>Usually when we talk about network programming, it refers to TCP programming by default, which is the TCP method we talked about in the previous chapter.
When the socket function creates a socket object, no parameters are given, and the default is SOCK_STREAM , which is socket (socket.AF_INET, socket.SOCK_STREAM), which means that a socket is created for streaming network communication.</p>
<p><code class="docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code>  is connection-oriented, that is, each time you send and receive data, you must create a connection through <code class="docutils literal notranslate"><span class="pre">connect</span></code> , which is also bidirectional, that is, any party can send and receive data. The protocol itself provides some guarantee mechanisms to ensure that it is reliable , Ordered, that is, each packet arrives at the receiver in the order in which it was sent.</p>
<p><code class="docutils literal notranslate"><span class="pre">SOCK_DGRAM</span></code> is the network communication of the User Datagram Protocol. It is connectionless and unreliable, because the two parties of the communication do not know whether the other party has received the data or whether it has received the data normally.
After any socket, you can use  <code class="docutils literal notranslate"><span class="pre">sendto</span></code> to send data, and you can also use <code class="docutils literal notranslate"><span class="pre">recvfrom</span></code> to receive data. I don’t care if the other party exists or if data is sent. It is characterized by relatively fast communication speed. Everyone knows that TCP is going to shake hands three times, but UDP does not.</p>
<div class="section" id="udp-client">
<h3><span class="section-number">10.4.2.1. </span>UDP Client<a class="headerlink" href="#udp-client" title="Permalink to this headline">¶</a></h3>
<p>The usual steps of UDP programming client are：</p>
<ol class="arabic simple">
<li><p>Create a UDP socket, use the function socket(socket.AF_INET, socket.SOCK_DGRAM)</p></li>
<li><p>To set the socket attribute, use the function <code class="docutils literal notranslate"><span class="pre">setsockopt()</span></code>  <em>optional</em></p></li>
<li><p>Bind the IP address, port and other information to the socket, use the function <code class="docutils literal notranslate"><span class="pre">bind()</span></code>  <em>optional</em></p></li>
<li><p>Set the other party’s IP address and port attributes</p></li>
<li><p>To send data, use the function <code class="docutils literal notranslate"><span class="pre">sendto()</span></code></p></li>
<li><p>Close network connection</p></li>
</ol>
<p>Example of UDP client:</p>
<img alt="../images/tutorials/udpclient.gif" class="align-center" src="../images/tutorials/udpclient.gif" />
</div>
<div class="section" id="udp-server">
<h3><span class="section-number">10.4.2.2. </span>UDP Server<a class="headerlink" href="#udp-server" title="Permalink to this headline">¶</a></h3>
<p>The usual steps of the server side of UDP programming are：</p>
<ol class="arabic simple">
<li><p>Create a UDP socket, use the function socket(socket.AF_INET, socket.SOCK_DGRAM)</p></li>
<li><p>To set the socket attribute, use the function  <code class="docutils literal notranslate"><span class="pre">setsockopt()</span></code>  <em>可选</em></p></li>
<li><p>Bind the IP address, port and other information to the socket, use the function <code class="docutils literal notranslate"><span class="pre">bind()</span></code></p></li>
<li><p>BReceive data in a loop, using the function <code class="docutils literal notranslate"><span class="pre">recvfrom()</span></code></p></li>
<li><p>Close network connection</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The return value of the``recvfrom()`` function is a binary (bytes, address), where bytes is the received byte data and address is the sender ’s IP address and port number,
It is represented by a two-tuple (host, port). Note that the return value of the recv() function only has bytes data. UDP, each time you send <code class="docutils literal notranslate"><span class="pre">sendto()</span></code> and receive dat <code class="docutils literal notranslate"><span class="pre">recvfrom</span></code> , you need to specify the address information. Unlike TCP programming, you do not need to cal <code class="docutils literal notranslate"><span class="pre">listen()</span></code> and <code class="docutils literal notranslate"><span class="pre">accept()</span></code> .</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>In the above example, use <code class="docutils literal notranslate"><span class="pre">connectWiFi()</span></code> to connect to the same router wifi. You can also use  <code class="docutils literal notranslate"><span class="pre">enable_APWiFi()</span></code> to turn on the AP mode and build a wifi network for other devices to access. So you don’t need to rely on other router wifi network.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="http.html" class="btn btn-neutral float-right" title="10.5. HTTP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tcp.html" class="btn btn-neutral float-left" title="10.3. Socket - TCP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, OHSTEM.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>