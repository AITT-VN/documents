

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5. Key Button &mdash; OhStem Product Documents 0.0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6. Touchpad" href="touchpad.html" />
    <link rel="prev" title="4. Music" href="buzz.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo-ohstem.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../board/index.html">xController Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Micropython Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Basic Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="repl.html">1. REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="oled.html">2. Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="neopixel.html">3. RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="buzz.html">4. Music</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5. Key Button</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtain-the-key-status">5.1. Obtain the key status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-interrupt">5.2. Key interrupt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="touchpad.html">6. Touchpad</a></li>
<li class="toctree-l2"><a class="reference internal" href="sound.html">7. Microphone</a></li>
<li class="toctree-l2"><a class="reference internal" href="light.html">8. Light Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="accelerometer.html">9. Accelerometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="network/index.html">10. Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="uart.html">11. Serial Port</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/index.html">12. Pins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advance/index.html">Advance Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Arduino Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Basic Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="repl.html">1. REPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="oled.html">2. Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="neopixel.html">3. RGB LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="buzz.html">4. Music</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5. Key Button</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtain-the-key-status">5.1. Obtain the key status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-interrupt">5.2. Key interrupt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="touchpad.html">6. Touchpad</a></li>
<li class="toctree-l2"><a class="reference internal" href="sound.html">7. Microphone</a></li>
<li class="toctree-l2"><a class="reference internal" href="light.html">8. Light Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="accelerometer.html">9. Accelerometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="network/index.html">10. Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="uart.html">11. Serial Port</a></li>
<li class="toctree-l2"><a class="reference internal" href="io/index.html">12. Pins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advance/index.html">Advance Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xController Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../library/micropython-api/index.html">MicroPython Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../library/arduino-api/index.html">Arduino Library</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OhStem Product Documents</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Basic Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Key Button</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/username/reponame/blob/mastertutorials/basics/buttons.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="key-button">
<h1><span class="section-number">5. </span>Key Button<a class="headerlink" href="#key-button" title="Permalink to this headline">¶</a></h1>
<p>There are two push buttons A and B on the upper edge of the control panel. Low level when the button is pressed, otherwise high level.</p>
<p>The process of pressing the keys on the control panel A and B is as follows. When pressed, the level changes from high to low, and the moment when the high level (1) changes to the low level (0) is called the falling edge. When the button is released, the level changes from low to high, and the moment when the low level (0) changes to the high level (1) is called the rising edge.
We can get the current key state by getting the level change.</p>
<img alt="../images/tutorials/falling.png" class="align-center" src="../images/tutorials/falling.png" />
<hr class="docutils" />
<div class="section" id="obtain-the-key-status">
<h2><span class="section-number">5.1. </span>Obtain the key status<a class="headerlink" href="#obtain-the-key-status" title="Permalink to this headline">¶</a></h2>
<p>First, import the mpython module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mpython</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Pressed Button A and Button B:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">button_a</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>      <span class="c1">#Pressed button A</span>
<span class="n">button_b</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>      <span class="c1">#Pressed button B</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>`` button_a`` is the object name of button A, and the object name of button B is `` button_b``, which is a derived class of `` machine.Pin`` and inherits the method of Pin, so you can use the `` value`` function to read the reference Pin value, return `` 1 ‘’ for high level signal, return `` 0 ‘’ for low level signal, so value == 1 when the button is not pressed, value == 0 when pressed. <code class="docutils literal notranslate"><span class="pre">button_a</span></code> is the object name of button A, and the object name of button B is <code class="docutils literal notranslate"><span class="pre">button_b</span></code> , which is a derived class of  <code class="docutils literal notranslate"><span class="pre">machine.Pin</span></code> and inherits the method of Pin, so you can use the  <code class="docutils literal notranslate"><span class="pre">value</span></code> function to read the reference Pin value, return <code class="docutils literal notranslate"><span class="pre">1</span></code>  for high level signal, return <code class="docutils literal notranslate"><span class="pre">0</span></code> for low level signal, so value==1，when the button is not pressed, value==0 when pressed.</p>
</div>
</div>
<div class="section" id="key-interrupt">
<h2><span class="section-number">5.2. </span>Key interrupt<a class="headerlink" href="#key-interrupt" title="Permalink to this headline">¶</a></h2>
<div class="admonition-what-is-an-interrupt admonition">
<p class="admonition-title">What is an interrupt？</p>
<p>In the process of running the program, the system has a situation that must be dealt with by the CPU immediately. At this time, the CPU temporarily suspends the execution of the program and turns to deal with this new situation.
When there is a need, the CPU must suspend the current thing, handle other things, and then go back to execute the suspended thing after processing.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the above program does not execute any instructions when the program is empty, etc. When the a and b keys are interrupted, the corresponding function is called back.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">button_a.irq(trigger=Pin.IRQ_FALLING,</span> <span class="pre">handler=ledon)</span></code> It is the function corresponding to the interrupt handler called. <cite>trigger</cite> configuration can trigger interrupt events, possible values are：<cite>Pin.IRQ_FALLING</cite> Falling edge interrupt；<cite>Pin.IRQ_RISING</cite> Rising edge interrupt；<cite>Pin.IRQ_LOW_LEVEL</cite> low level interrupt；<cite>Pin.IRQ_HIGH_LEVEL</cite> high level interrupt. <cite>handler</cite>  is an optional function that is called when an interrupt is triggered and returns a callback object.
For detail, refers to <span class="xref std std-ref">button_[a,b].irq</span>。</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>When defining an interrupt handler function, the function must contain any  <strong>ONE</strong> parameter, otherwise it cannot be used. The parameters in theledon()、ledoff() functions are <code class="docutils literal notranslate"><span class="pre">_</span></code> .</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="touchpad.html" class="btn btn-neutral float-right" title="6. Touchpad" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="buzz.html" class="btn btn-neutral float-left" title="4. Music" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, OHSTEM.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>